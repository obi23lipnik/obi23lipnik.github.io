<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', {packages: ['corechart', 'line']});
    google.charts.setOnLoadCallback(drawLineColors);
    async function fetchData() {
        let response = await fetch(url, {
            mode: 'no-cors',
            headers: {
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '139.59.140.143:82',
            },
            credentials: 'same-origin',
            referrerPolicy: 'no-referrer',
        });
        if (response.status === 200) {
            let data = await response.text()
            console.log(data)
        }
        console.log(response)
    }
    async function drawLineColors() {
        var data = new google.visualization.DataTable();
        const url = "http://139.59.140.143:82/?chart=true"
        data.addColumn('number', 'X');
        data.addColumn('number', 'QBit-USD');
        
        let response = await fetch(url, {
            mode: 'cors',
            headers: {
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': 'https://obi23lipnik.github.io',
            },
            credentials: 'same-origin',
            referrerPolicy: 'no-referrer',
        });
        let resdata = await response.json()
        console.log(resdata)
        console.log(response)
        console.log(response.status)
        console.log(response.statusText)
        data.addRows(resdata.xdata);

        var options = {
            hAxis: {
            title: 'Time'
            },
            vAxis: {
            title: 'Price'
            },
            colors: ['#a52714']
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
        }
</script>
<div id="chart_div"></div>
